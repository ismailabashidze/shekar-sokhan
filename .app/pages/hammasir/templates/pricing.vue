<script setup lang="ts">
definePageMeta({
  title: 'ููุชโฺฏุฐุงุฑ ููุณุฑ',
  preview: {
    title: 'Hammasir Pricing',
    description: 'Pricing plans for Hammasir counseling services',
    categories: ['pricing'],
    src: '/img/screens/pricing-hammasir.png',
    srcDark: '/img/screens/pricing-hammasir-dark.png',
    order: 5,
  },
  layout: 'sidebar',
})
useHead({ htmlAttrs: { dir: 'rtl' } })

const pricingPlans = [
  {
    id: 'basic',
    name: 'ุจุณุชู ูพุงู',
    subtitle: 'ุจุฑุง ุดุฑูุน ูุณุฑ ุฎูุฏุดูุงุณ',
    price: 450000,
    originalPrice: 650000,
    duration: '2 ูุงู',
    popular: false,
    description: 'ุดุงูู ุขุฒูููโูุง ุงููู ู ุฑุงูููุงโูุง ูพุงู',
    features: [
      'ุขุฒููู ุดุฎุตุช NEO (ฺฉุงูู)',
      'ุชุญูู ุงููู ุดุฎุตุช',
      'ุฏุณุชุฑุณ ุจู ุขุฒูููโูุง ุฑูุงูโุดูุงุฎุช',
      '1 ุฌูุณู ูุดุงูุฑู ุขููุงู',
      'ูพุดุชุจุงู ุชูฺฏุฑุงู',
      'ุฏุณุชุฑุณ 2 ูุงูู'
    ],
    notIncluded: [
      'ุฏูุฑูโูุง ุชุฎุตุต',
      'ูุดุงูุฑู ุญุถูุฑ',
      'ููุณุงูโุงุจ ูพุดุฑูุชู'
    ],
    badge: null,
    color: 'blue'
  },
  {
    id: 'standard',
    name: 'ุจุณุชู ุงุณุชุงูุฏุงุฑุฏ',
    subtitle: 'ุจุฑุง ุชูุณุนู ุฌุฏ ููุงุฑุชโูุง ูุฑุฏ',
    price: 850000,
    originalPrice: 1200000,
    duration: '4 ูุงู',
    popular: true,
    description: 'ุดุงูู ุฏูุฑูโูุง ุขููุฒุด ู ูุดุงูุฑู ุชุฎุตุต',
    features: [
      'ููู ุงูฺฉุงูุงุช ุจุณุชู ูพุงู',
      'ุฏูุฑู ูุฏุฑุช ูุฌุงูุงุช (13 ุฌูุณู)',
      'ุขุฒูููโูุง ุชุฎุตุต (Cattell, Glasser)',
      '4 ุฌูุณู ูุดุงูุฑู ุชุฎุตุต',
      'ุชุญูู ุนูู ุดุฎุตุช',
      'ุจุฑูุงูู ุดุฎุตโุณุงุฒ ุดุฏู',
      'ูพุดุชุจุงู ุงูููุชโุฏุงุฑ',
      'ุฏุณุชุฑุณ 4 ูุงูู'
    ],
    notIncluded: [
      'ููุณุงูโุงุจ ูพุดุฑูุชู',
      'ูุดุงูุฑู ูุงูุญุฏูุฏ'
    ],
    badge: 'ูุญุจูุจโุชุฑู',
    color: 'purple'
  },
  {
    id: 'premium',
    name: 'ุจุณุชู ุญุฑููโุง',
    subtitle: 'ุจุฑุง ุขูุงุฏฺฏ ฺฉุงูู ุงุฒุฏูุงุฌ',
    price: 1450000,
    originalPrice: 2000000,
    duration: '6 ูุงู',
    popular: false,
    description: 'ุดุงูู ููุณุงูโุงุจ ููุดููุฏ ู ูุดุงูุฑู ูุงูุญุฏูุฏ',
    features: [
      'ููู ุงูฺฉุงูุงุช ุจุณุชู ุงุณุชุงูุฏุงุฑุฏ',
      'ููุณุงูโุงุจ ููุดููุฏ',
      'ูุดุงูุฑู ูุงูุญุฏูุฏ (ุชุง 12 ุฌูุณู)',
      'ุขุฒููู ุขูุงุฏฺฏ ุงุฒุฏูุงุฌ',
      'ุชุญูู ุณุงุฒฺฏุงุฑ ูุงู',
      'ุจุฑูุงููโุฑุฒ ุฒูุฏฺฏ ุฒูุงุดู',
      'ูพุดุชุจุงู 24/7',
      'ุถูุงูุช ุจุงุฒฺฏุดุช ูุฌู',
      'ุฏุณุชุฑุณ 6 ูุงูู'
    ],
    notIncluded: [],
    badge: 'ูพุดุฑูุชู',
    color: 'emerald'
  }
]

const paymentMethods = [
  {
    id: 'bank_transfer',
    name: 'ุงูุชูุงู ุจุงูฺฉ ูุณุชูู',
    description: 'ุงูุชูุงู ูุฌู ุจู ุญุณุงุจ ุจุงูฺฉ (ูุนุงู)',
    icon: 'ph:bank',
    available: true,
    processingTime: 'ููุฑ ุชุง 2 ุณุงุนุช',
    fee: 'ุจุฏูู ฺฉุงุฑูุฒุฏ',
    details: {
      bankName: 'ุจุงูฺฉ ูู ุงุฑุงู',
      accountNumber: '1234567890123456',
      cardNumber: '6274-1211-2345-6789',
      accountHolder: 'ุดุฑฺฉุช ููุงูุฑ ุฐููุง'
    }
  },
  {
    id: 'gateway',
    name: 'ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช ุงูุชุฑูุช',
    description: 'ูพุฑุฏุงุฎุช ุขููุงู ุจุง ฺฉุงุฑุชโูุง ุจุงูฺฉ (ุจูโุฒูุฏ)',
    icon: 'ph:credit-card',
    available: false,
    processingTime: 'ููุฑ',
    fee: 'ฺฉุงุฑูุฒุฏ ุฏุฑฺฏุงู',
    comingSoon: true
  }
]

const selectedPlan = ref(null)
const selectedPaymentMethod = ref('bank_transfer')
const showPaymentModal = ref(false)
const orderStep = ref(1) // 1: ุงูุชุฎุงุจ ุจุณุชูุ 2: ุงุทูุงุนุงุชุ 3: ูพุฑุฏุงุฎุช

const orderForm = ref({
  fullName: '',
  phoneNumber: '',
  email: '',
  agreement: false
})

function selectPlan(plan) {
  selectedPlan.value = plan
  showPaymentModal.value = true
  orderStep.value = 2
}

function getDiscountPercentage(original, current) {
  return Math.round(((original - current) / original) * 100)
}

function formatPrice(price) {
  return new Intl.NumberFormat('fa-IR').format(price)
}

function proceedToPayment() {
  if (!orderForm.value.agreement) {
    alert('ูุทูุงู ููุงูู ู ููุฑุฑุงุช ุฑุง ูุทุงูุนู ู ุชุฃุฏ ฺฉูุฏ')
    return
  }
  orderStep.value = 3
}

function submitOrder() {
  // ุจุฑุง MVP - ููุงุด ุงุทูุงุนุงุช ุงูุชูุงู ุจุงูฺฉ
  alert('ุณูุงุฑุด ุดูุง ุซุจุช ุดุฏ. ุงุทูุงุนุงุช ุงูุชูุงู ุจุงูฺฉ ููุงุด ุฏุงุฏู ุฎูุงูุฏ ุดุฏ.')
  // ุฏุฑ ุขูุฏู: ุงุฑุณุงู ุจู API ุจุฑุง ุซุจุช ุณูุงุฑุด
}

function closeModal() {
  showPaymentModal.value = false
  orderStep.value = 1
  selectedPlan.value = null
  orderForm.value = {
    fullName: '',
    phoneNumber: '',
    email: '',
    agreement: false
  }
}

const benefits = [
  {
    icon: 'ph:shield-check',
    title: 'ุชุถูู ฺฉูุช',
    description: 'ุถูุงูุช ุจุงุฒฺฏุดุช ูุฌู ุฏุฑ ุตูุฑุช ุนุฏู ุฑุถุงุช'
  },
  {
    icon: 'ph:users-three',
    title: 'ุฑูุงูโุดูุงุณุงู ูุชุฎุตุต',
    description: 'ูุดุงูุฑู ุจุง ุจูุชุฑู ูุชุฎุตุตุงู ฺฉุดูุฑ'
  },
  {
    icon: 'ph:clock',
    title: 'ูพุดุชุจุงู 24/7',
    description: 'ูพุงุณุฎฺฏู ุฏุฑ ุชูุงู ุณุงุนุงุช ุดุจุงููโุฑูุฒ'
  },
  {
    icon: 'ph:chart-line-up',
    title: 'ูพุดุฑูุช ูุงุจู ุงูุฏุงุฒูโฺฏุฑ',
    description: 'ุฑุตุฏ ุฏูู ูพุดุฑูุช ุฏุฑ ุชูุงู ูุฑุงุญู'
  }
]

const faqs = [
  {
    question: 'ุขุง ูโุชูุงูู ุจุณุชูโุงู ุฑุง ุชุบุฑ ุฏููุ',
    answer: 'ุจููุ ุชุง 7 ุฑูุฒ ูพุณ ุงุฒ ุฎุฑุฏ ุงูฺฉุงู ุชุบุฑ ุจุณุชู ูุฌูุฏ ุฏุงุฑุฏ.'
  },
  {
    question: 'ูุฏุช ุฒูุงู ุฏุณุชุฑุณ ฺูุฏุฑ ุงุณุชุ',
    answer: 'ุจุณุชู ุจู ููุน ุจุณุชู ุงูุชุฎุงุจุ ุงุฒ 2 ุชุง 6 ูุงู ุฏุณุชุฑุณ ุฎูุงูุฏ ุฏุงุดุช.'
  },
  {
    question: 'ุขุง ุงูฺฉุงู ุจุงุฒูพุฑุฏุงุฎุช ูุฌูุฏ ุฏุงุฑุฏุ',
    answer: 'ุฏุฑ ุตูุฑุช ุนุฏู ุฑุถุงุช ุชุง 14 ุฑูุฒ ูพุณ ุงุฒ ุฎุฑุฏุ ฺฉู ูุจูุบ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.'
  },
  {
    question: 'ฺุทูุฑ ุจู ูุดุงูุฑ ุฏุณุชุฑุณ ูพุฏุง ฺฉููุ',
    answer: 'ูพุณ ุงุฒ ุฎุฑุฏุ ุงุฒ ุทุฑู ูพูู ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ุฌูุณู ุฑุฒุฑู ฺฉูุฏ.'
  }
]

const openFaq = ref(null)

function toggleFaq(index) {
  openFaq.value = openFaq.value === index ? null : index
}
</script>

<template>
  <div>
    <!-- Hero Section -->
    <div class="relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-600 via-blue-700 to-indigo-800 p-1 shadow-2xl shadow-purple-500/25 mb-12">
      <div class="absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-transparent"></div>
      <div class="relative rounded-3xl bg-gradient-to-br from-purple-600/90 via-blue-700/90 to-indigo-800/90 backdrop-blur-xl px-8 py-16">
        <!-- Floating decorative elements -->
        <div class="absolute top-8 right-12 w-24 h-24 bg-white/5 rounded-full blur-3xl"></div>
        <div class="absolute bottom-12 left-16 w-32 h-32 bg-blue-400/10 rounded-full blur-3xl"></div>
        
        <div class="relative text-center max-w-4xl mx-auto">
          <BaseHeading
            as="h1"
            size="5xl"
            weight="bold"
            lead="tight"
            class="text-white drop-shadow-lg mb-6"
          >
            <span class="bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent">
              ููุชโฺฏุฐุงุฑ ููุณุฑ
            </span>
          </BaseHeading>
          
          <BaseParagraph class="text-white/90 text-xl leading-relaxed max-w-3xl mx-auto mb-8">
            <span>
              ุจุณุชูโูุง ูุฎุชูู ุจุฑุง ูุณุฑ ุฎูุฏุดูุงุณ ู ุขูุงุฏฺฏ ุงุฒุฏูุงุฌ ุดูุง ุทุฑุงุญ ฺฉุฑุฏูโุงู. 
              ุจุณุชู ููุงุณุจ ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ู ูุณุฑ ุฑุดุฏ ุดุฎุต ุฎูุฏ ุฑุง ุขุบุงุฒ ฺฉูุฏ.
            </span>
          </BaseParagraph>

          <!-- Quick Stats -->
          <div class="flex justify-center gap-8 text-center">
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="text-2xl font-bold text-white mb-1">+1000</div>
              <div class="text-white/80 text-sm">ฺฉุงุฑุจุฑ ูููู</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="text-2xl font-bold text-white mb-1">95%</div>
              <div class="text-white/80 text-sm">ุฑุถุงุช ฺฉุงุฑุจุฑุงู</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20">
              <div class="text-2xl font-bold text-white mb-1">24/7</div>
              <div class="text-white/80 text-sm">ูพุดุชุจุงู</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing Plans -->
    <div class="mb-16">
      <div class="text-center mb-12">
        <BaseHeading as="h2" size="3xl" weight="bold" class="text-gray-900 dark:text-white mb-4">
          <span>ุจุณุชูโูุง ุฎุฏูุงุช</span>
        </BaseHeading>
        <BaseParagraph class="text-gray-600 dark:text-gray-300 text-lg max-w-2xl mx-auto">
          <span>ุจุณุชู ููุงุณุจ ูุงุฒ ู ุจูุฏุฌู ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</span>
        </BaseParagraph>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
        <div 
          v-for="plan in pricingPlans" 
          :key="plan.id"
          class="relative group"
        >
          <!-- Popular badge -->
          <div 
            v-if="plan.popular"
            class="absolute -top-4 left-1/2 transform -translate-x-1/2 z-10"
          >
            <div class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-full text-sm font-bold shadow-lg">
              {{ plan.badge }}
            </div>
          </div>

          <div 
            class="relative overflow-hidden rounded-3xl transition-all duration-300 hover:scale-105 group-hover:shadow-2xl"
            :class="{
              'bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-blue-200': plan.color === 'blue',
              'bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 border-2 border-purple-300': plan.color === 'purple',
              'bg-gradient-to-br from-emerald-50 to-teal-100 dark:from-emerald-900/20 dark:to-teal-900/20 border-2 border-emerald-300': plan.color === 'emerald'
            }"
          >
            <!-- Background decorations -->
            <div class="absolute top-0 right-0 w-32 h-32 opacity-20 blur-2xl"
              :class="{
                'bg-gradient-to-br from-blue-400 to-indigo-500': plan.color === 'blue',
                'bg-gradient-to-br from-purple-400 to-pink-500': plan.color === 'purple',
                'bg-gradient-to-br from-emerald-400 to-teal-500': plan.color === 'emerald'
              }"
            ></div>
            
            <div class="relative p-8">
              <!-- Plan Header -->
              <div class="text-center mb-8">
                <BaseHeading as="h3" size="xl" weight="bold" class="text-gray-900 dark:text-white mb-2">
                  <span>{{ plan.name }}</span>
                </BaseHeading>
                <BaseParagraph size="sm" class="text-gray-600 dark:text-gray-300 mb-4">
                  <span>{{ plan.subtitle }}</span>
                </BaseParagraph>
                
                <!-- Price -->
                <div class="mb-6">
                  <div class="flex items-center justify-center gap-3 mb-2">
                    <div class="text-4xl font-bold text-gray-900 dark:text-white">
                      {{ formatPrice(plan.price) }}
                    </div>
                    <div class="text-sm text-gray-500 dark:text-gray-400">
                      ุชููุงู
                    </div>
                  </div>
                  
                  <div class="flex items-center justify-center gap-2 mb-2">
                    <span class="text-lg text-gray-500 dark:text-gray-400 line-through">
                      {{ formatPrice(plan.originalPrice) }}
                    </span>
                    <div class="bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold">
                      {{ getDiscountPercentage(plan.originalPrice, plan.price) }}% ุชุฎูู
                    </div>
                  </div>
                  
                  <div class="text-sm text-gray-500 dark:text-gray-400">
                    {{ plan.duration }}
                  </div>
                </div>
                
                <BaseParagraph size="sm" class="text-gray-600 dark:text-gray-300">
                  <span>{{ plan.description }}</span>
                </BaseParagraph>
              </div>

              <!-- Features -->
              <div class="mb-8">
                <div class="space-y-4">
                  <div 
                    v-for="feature in plan.features" 
                    :key="feature"
                    class="flex items-start gap-3"
                  >
                    <div class="flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center mt-0.5"
                      :class="{
                        'bg-blue-500': plan.color === 'blue',
                        'bg-purple-500': plan.color === 'purple',
                        'bg-emerald-500': plan.color === 'emerald'
                      }"
                    >
                      <Icon name="ph:check" class="w-3 h-3 text-white" />
                    </div>
                    <span class="text-sm text-gray-700 dark:text-gray-200 font-medium">{{ feature }}</span>
                  </div>
                  
                  <!-- Not included features -->
                  <div 
                    v-for="notIncluded in plan.notIncluded" 
                    :key="notIncluded"
                    class="flex items-start gap-3 opacity-50"
                  >
                    <div class="flex-shrink-0 w-5 h-5 bg-gray-300 rounded-full flex items-center justify-center mt-0.5">
                      <Icon name="ph:x" class="w-3 h-3 text-white" />
                    </div>
                    <span class="text-sm text-gray-500 dark:text-gray-400">{{ notIncluded }}</span>
                  </div>
                </div>
              </div>

              <!-- CTA Button -->
              <BaseButton 
                @click="selectPlan(plan)"
                class="w-full relative overflow-hidden group transition-all duration-300 hover:scale-105"
                :class="{
                  'bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white shadow-lg shadow-blue-500/25': plan.color === 'blue',
                  'bg-gradient-to-r from-purple-600 to-pink-700 hover:from-purple-700 hover:to-pink-800 text-white shadow-lg shadow-purple-500/25': plan.color === 'purple',
                  'bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-700 hover:to-teal-800 text-white shadow-lg shadow-emerald-500/25': plan.color === 'emerald'
                }"
              >
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div>
                <span class="relative z-10 font-bold">ุงูุชุฎุงุจ ุจุณุชู {{ plan.name }}</span>
              </BaseButton>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Benefits Section -->
    <div class="mb-16">
      <div class="text-center mb-12">
        <BaseHeading as="h2" size="3xl" weight="bold" class="text-gray-900 dark:text-white mb-4">
          <span>ูุฒุงุง ููุณุฑ</span>
        </BaseHeading>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div 
          v-for="benefit in benefits" 
          :key="benefit.title"
          class="group text-center"
        >
          <div class="relative mb-6">
            <div class="w-16 h-16 mx-auto bg-gradient-to-br from-purple-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/25 group-hover:scale-110 transition-all duration-300">
              <Icon :name="benefit.icon" class="w-8 h-8 text-white" />
            </div>
          </div>
          <BaseHeading as="h3" size="md" weight="semibold" class="text-gray-900 dark:text-white mb-3">
            <span>{{ benefit.title }}</span>
          </BaseHeading>
          <BaseParagraph size="sm" class="text-gray-600 dark:text-gray-300">
            <span>{{ benefit.description }}</span>
          </BaseParagraph>
        </div>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="mb-16">
      <div class="text-center mb-12">
        <BaseHeading as="h2" size="3xl" weight="bold" class="text-gray-900 dark:text-white mb-4">
          <span>ุณูุงูุงุช ูุชุฏุงูู</span>
        </BaseHeading>
      </div>

      <div class="max-w-3xl mx-auto">
        <div class="space-y-4">
          <div 
            v-for="(faq, index) in faqs" 
            :key="index"
            class="border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden"
          >
            <button 
              @click="toggleFaq(index)"
              class="w-full px-6 py-4 text-right flex items-center justify-between bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
            >
              <BaseHeading as="h4" size="md" weight="medium" class="text-gray-900 dark:text-white">
                <span>{{ faq.question }}</span>
              </BaseHeading>
              <Icon 
                :name="openFaq === index ? 'ph:minus' : 'ph:plus'" 
                class="w-5 h-5 text-gray-500 transition-transform duration-200"
                :class="{ 'rotate-180': openFaq === index }"
              />
            </button>
            <div 
              v-if="openFaq === index"
              class="px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700"
            >
              <BaseParagraph class="text-gray-600 dark:text-gray-300">
                <span>{{ faq.answer }}</span>
              </BaseParagraph>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Payment Modal -->
    <TairoModal :open="showPaymentModal" size="xl" @close="closeModal">
      <template #header>
        <div class="flex items-center justify-between">
          <BaseHeading as="h3" size="lg" weight="semibold" class="text-gray-900 dark:text-white">
            <span v-if="orderStep === 1">ุงูุชุฎุงุจ ุจุณุชู</span>
            <span v-else-if="orderStep === 2">ุชฺฉูู ุงุทูุงุนุงุช</span>
            <span v-else>ูพุฑุฏุงุฎุช ููุง</span>
          </BaseHeading>
          <BaseButton @click="closeModal" variant="ghost" size="sm">
            <Icon name="ph:x" class="w-5 h-5" />
          </BaseButton>
        </div>
      </template>

      <div class="p-6">
        <!-- Step 2: Order Information -->
        <div v-if="orderStep === 2">
          <div class="mb-6">
            <div class="bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-2xl p-6 border border-purple-200/50">
              <div class="flex items-center justify-between mb-4">
                <BaseHeading as="h4" size="md" weight="semibold" class="text-gray-900 dark:text-white">
                  <span>{{ selectedPlan?.name }}</span>
                </BaseHeading>
                <div class="text-2xl font-bold text-purple-600">
                  {{ formatPrice(selectedPlan?.price) }} ุชููุงู
                </div>
              </div>
              <BaseParagraph size="sm" class="text-gray-600 dark:text-gray-300">
                <span>{{ selectedPlan?.description }}</span>
              </BaseParagraph>
            </div>
          </div>

          <form @submit.prevent="proceedToPayment">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <BaseInput
                v-model="orderForm.fullName"
                label="ูุงู ู ูุงู ุฎุงููุงุฏฺฏ"
                placeholder="ูุงู ฺฉุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ"
                required
              />
              <BaseInput
                v-model="orderForm.phoneNumber"
                label="ุดูุงุฑู ุชูุงุณ"
                placeholder="09123456789"
                type="tel"
                required
              />
            </div>
            
            <div class="mb-6">
              <BaseInput
                v-model="orderForm.email"
                label="ุงูู"
                placeholder="example@email.com"
                type="email"
                required
              />
            </div>

            <div class="mb-6">
              <label class="flex items-start gap-3">
                <BaseCheckbox v-model="orderForm.agreement" required />
                <span class="text-sm text-gray-600 dark:text-gray-300">
                  <a href="#" class="text-purple-600 hover:underline">ููุงูู ู ููุฑุฑุงุช</a> ู 
                  <a href="#" class="text-purple-600 hover:underline">ุณุงุณุช ุญูุธ ุญุฑู ุฎุตูุต</a> 
                  ุฑุง ูุทุงูุนู ฺฉุฑุฏู ู ุจุง ุขู ููุงููู.
                </span>
              </label>
            </div>

            <div class="flex gap-4">
              <BaseButton @click="closeModal" variant="outline" class="flex-1">
                ุงูุตุฑุงู
              </BaseButton>
              <BaseButton type="submit" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white">
                ุงุฏุงูู ูพุฑุฏุงุฎุช
              </BaseButton>
            </div>
          </form>
        </div>

        <!-- Step 3: Payment Methods -->
        <div v-if="orderStep === 3">
          <div class="mb-6">
            <BaseHeading as="h4" size="md" weight="semibold" class="text-gray-900 dark:text-white mb-4">
              <span>ุฑูุด ูพุฑุฏุงุฎุช</span>
            </BaseHeading>
            
            <div class="space-y-4">
              <div 
                v-for="method in paymentMethods" 
                :key="method.id"
                class="relative"
              >
                <label 
                  class="block cursor-pointer"
                  :class="{ 'opacity-50 cursor-not-allowed': !method.available }"
                >
                  <input 
                    v-model="selectedPaymentMethod" 
                    :value="method.id"
                    type="radio"
                    class="sr-only"
                    :disabled="!method.available"
                  />
                  <div 
                    class="border-2 rounded-2xl p-6 transition-all duration-200"
                    :class="selectedPaymentMethod === method.id ? 'border-purple-500 bg-purple-50 dark:bg-purple-900/20' : 'border-gray-200 dark:border-gray-700'"
                  >
                    <div class="flex items-start gap-4">
                      <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl flex items-center justify-center">
                        <Icon :name="method.icon" class="w-6 h-6 text-white" />
                      </div>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                          <BaseHeading as="h5" size="sm" weight="semibold" class="text-gray-900 dark:text-white">
                            <span>{{ method.name }}</span>
                          </BaseHeading>
                          <span v-if="method.comingSoon" class="bg-orange-100 text-orange-600 text-xs px-2 py-1 rounded-full">
                            ุจูโุฒูุฏ
                          </span>
                        </div>
                        <BaseParagraph size="sm" class="text-gray-600 dark:text-gray-300 mb-3">
                          <span>{{ method.description }}</span>
                        </BaseParagraph>
                        <div class="flex gap-4 text-xs text-gray-500">
                          <span>โฑ {{ method.processingTime }}</span>
                          <span>๐ฐ {{ method.fee }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <!-- Bank Transfer Details -->
          <div v-if="selectedPaymentMethod === 'bank_transfer'" class="mb-6">
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-6 border border-blue-200/50">
              <BaseHeading as="h5" size="md" weight="semibold" class="text-gray-900 dark:text-white mb-4">
                <span>ุงุทูุงุนุงุช ุงูุชูุงู ุจุงูฺฉ</span>
              </BaseHeading>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="font-medium text-gray-700 dark:text-gray-300">ุจุงูฺฉ:</span>
                  <span class="text-gray-900 dark:text-white mr-2">{{ paymentMethods[0].details.bankName }}</span>
                </div>
                <div>
                  <span class="font-medium text-gray-700 dark:text-gray-300">ุตุงุญุจ ุญุณุงุจ:</span>
                  <span class="text-gray-900 dark:text-white mr-2">{{ paymentMethods[0].details.accountHolder }}</span>
                </div>
                <div>
                  <span class="font-medium text-gray-700 dark:text-gray-300">ุดูุงุฑู ุญุณุงุจ:</span>
                  <span class="text-gray-900 dark:text-white mr-2 font-mono">{{ paymentMethods[0].details.accountNumber }}</span>
                </div>
                <div>
                  <span class="font-medium text-gray-700 dark:text-gray-300">ุดูุงุฑู ฺฉุงุฑุช:</span>
                  <span class="text-gray-900 dark:text-white mr-2 font-mono">{{ paymentMethods[0].details.cardNumber }}</span>
                </div>
              </div>

              <div class="mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200">
                <div class="flex items-start gap-2">
                  <Icon name="ph:info" class="w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5" />
                  <div class="text-sm text-yellow-800 dark:text-yellow-200">
                    <strong>ููู:</strong> ูพุณ ุงุฒ ุงูุชูุงู ูุฌูุ ุฑุณุฏ ูพุฑุฏุงุฎุช ุฑุง ุงุฒ ุทุฑู ุชูฺฏุฑุงู ุง ุงูู ุจุฑุง ูุง ุงุฑุณุงู ฺฉูุฏ ุชุง ุญุณุงุจ ุดูุง ูุนุงู ุดูุฏ.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Order Summary -->
          <div class="mb-6">
            <div class="bg-gray-50 dark:bg-gray-800 rounded-2xl p-6">
              <BaseHeading as="h5" size="md" weight="semibold" class="text-gray-900 dark:text-white mb-4">
                <span>ุฎูุงุตู ุณูุงุฑุด</span>
              </BaseHeading>
              
              <div class="space-y-3">
                <div class="flex justify-between">
                  <span class="text-gray-600 dark:text-gray-300">ุจุณุชู ุงูุชุฎุงุจ:</span>
                  <span class="font-medium text-gray-900 dark:text-white">{{ selectedPlan?.name }}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-600 dark:text-gray-300">ูุจูุบ ุงุตู:</span>
                  <span class="text-gray-500 line-through">{{ formatPrice(selectedPlan?.originalPrice) }} ุชููุงู</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-600 dark:text-gray-300">ุชุฎูู:</span>
                  <span class="text-green-600 font-medium">{{ formatPrice(selectedPlan?.originalPrice - selectedPlan?.price) }} ุชููุงู</span>
                </div>
                <hr class="border-gray-200 dark:border-gray-700">
                <div class="flex justify-between text-lg font-bold">
                  <span class="text-gray-900 dark:text-white">ูุจูุบ ููุง:</span>
                  <span class="text-purple-600">{{ formatPrice(selectedPlan?.price) }} ุชููุงู</span>
                </div>
              </div>
            </div>
          </div>

          <div class="flex gap-4">
            <BaseButton @click="orderStep = 2" variant="outline" class="flex-1">
              ุจุงุฒฺฏุดุช
            </BaseButton>
            <BaseButton @click="submitOrder" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white">
              ุชุฃุฏ ู ุซุจุช ุณูุงุฑุด
            </BaseButton>
          </div>
        </div>
      </div>
    </TairoModal>
  </div>
</template>

<style scoped>
/* Custom animations for pricing cards */
@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 3s ease infinite;
}

/* Hover effects */
.hover-scale {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-scale:hover {
  transform: scale(1.05);
}

/* Shimmer effect for buttons */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-shimmer {
  animation: shimmer 2s ease-in-out infinite;
}
</style>