{"code":"(()=>{\nvar __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var fs=require(\"fs\");var polyfills=require(\"./polyfills.js\");var legacy=require(\"./legacy-streams.js\");var clone=require(\"./clone.js\");var util=require(\"util\");var gracefulQueue;var previousSymbol;if(typeof Symbol===\"function\"&&typeof Symbol.for===\"function\"){gracefulQueue=Symbol.for(\"graceful-fs.queue\");previousSymbol=Symbol.for(\"graceful-fs.previous\")}else{gracefulQueue=\"___graceful-fs.queue\";previousSymbol=\"___graceful-fs.previous\"}function noop(){}__name(noop,\"noop\");function publishQueue(context,queue){Object.defineProperty(context,gracefulQueue,{get:function(){return queue}})}__name(publishQueue,\"publishQueue\");var debug=noop;if(util.debuglog)debug=util.debuglog(\"gfs4\");else if(/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||\"\"))debug=__name(function(){var m=util.format.apply(util,arguments);m=\"GFS4: \"+m.split(/\\n/).join(\"\\nGFS4: \");console.error(m)},\"debug\");if(!fs[gracefulQueue]){var queue=global[gracefulQueue]||[];publishQueue(fs,queue);fs.close=function(fs$close){function close(fd,cb){return fs$close.call(fs,fd,function(err){if(!err){resetQueue()}if(typeof cb===\"function\")cb.apply(this,arguments)})}__name(close,\"close\");Object.defineProperty(close,previousSymbol,{value:fs$close});return close}(fs.close);fs.closeSync=function(fs$closeSync){function closeSync(fd){fs$closeSync.apply(fs,arguments);resetQueue()}__name(closeSync,\"closeSync\");Object.defineProperty(closeSync,previousSymbol,{value:fs$closeSync});return closeSync}(fs.closeSync);if(/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||\"\")){process.on(\"exit\",function(){debug(fs[gracefulQueue]);require(\"assert\").equal(fs[gracefulQueue].length,0)})}}if(!global[gracefulQueue]){publishQueue(global,fs[gracefulQueue])}module.exports=patch(clone(fs));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!fs.__patched){module.exports=patch(fs);fs.__patched=true}function patch(fs2){polyfills(fs2);fs2.gracefulify=patch;fs2.createReadStream=createReadStream;fs2.createWriteStream=createWriteStream;var fs$readFile=fs2.readFile;fs2.readFile=readFile;function readFile(path,options,cb){if(typeof options===\"function\")cb=options,options=null;return go$readFile(path,options,cb);function go$readFile(path2,options2,cb2,startTime){return fs$readFile(path2,options2,function(err){if(err&&(err.code===\"EMFILE\"||err.code===\"ENFILE\"))enqueue([go$readFile,[path2,options2,cb2],err,startTime||Date.now(),Date.now()]);else{if(typeof cb2===\"function\")cb2.apply(this,arguments)}})}__name(go$readFile,\"go$readFile\")}__name(readFile,\"readFile\");var fs$writeFile=fs2.writeFile;fs2.writeFile=writeFile;function writeFile(path,data,options,cb){if(typeof options===\"function\")cb=options,options=null;return go$writeFile(path,data,options,cb);function go$writeFile(path2,data2,options2,cb2,startTime){return fs$writeFile(path2,data2,options2,function(err){if(err&&(err.code===\"EMFILE\"||err.code===\"ENFILE\"))enqueue([go$writeFile,[path2,data2,options2,cb2],err,startTime||Date.now(),Date.now()]);else{if(typeof cb2===\"function\")cb2.apply(this,arguments)}})}__name(go$writeFile,\"go$writeFile\")}__name(writeFile,\"writeFile\");var fs$appendFile=fs2.appendFile;if(fs$appendFile)fs2.appendFile=appendFile;function appendFile(path,data,options,cb){if(typeof options===\"function\")cb=options,options=null;return go$appendFile(path,data,options,cb);function go$appendFile(path2,data2,options2,cb2,startTime){return fs$appendFile(path2,data2,options2,function(err){if(err&&(err.code===\"EMFILE\"||err.code===\"ENFILE\"))enqueue([go$appendFile,[path2,data2,options2,cb2],err,startTime||Date.now(),Date.now()]);else{if(typeof cb2===\"function\")cb2.apply(this,arguments)}})}__name(go$appendFile,\"go$appendFile\")}__name(appendFile,\"appendFile\");var fs$copyFile=fs2.copyFile;if(fs$copyFile)fs2.copyFile=copyFile;function copyFile(src,dest,flags,cb){if(typeof flags===\"function\"){cb=flags;flags=0}return go$copyFile(src,dest,flags,cb);function go$copyFile(src2,dest2,flags2,cb2,startTime){return fs$copyFile(src2,dest2,flags2,function(err){if(err&&(err.code===\"EMFILE\"||err.code===\"ENFILE\"))enqueue([go$copyFile,[src2,dest2,flags2,cb2],err,startTime||Date.now(),Date.now()]);else{if(typeof cb2===\"function\")cb2.apply(this,arguments)}})}__name(go$copyFile,\"go$copyFile\")}__name(copyFile,\"copyFile\");var fs$readdir=fs2.readdir;fs2.readdir=readdir;var noReaddirOptionVersions=/^v[0-5]\\./;function readdir(path,options,cb){if(typeof options===\"function\")cb=options,options=null;var go$readdir=noReaddirOptionVersions.test(process.version)?__name(function go$readdir2(path2,options2,cb2,startTime){return fs$readdir(path2,fs$readdirCallback(path2,options2,cb2,startTime))},\"go$readdir\"):__name(function go$readdir2(path2,options2,cb2,startTime){return fs$readdir(path2,options2,fs$readdirCallback(path2,options2,cb2,startTime))},\"go$readdir\");return go$readdir(path,options,cb);function fs$readdirCallback(path2,options2,cb2,startTime){return function(err,files){if(err&&(err.code===\"EMFILE\"||err.code===\"ENFILE\"))enqueue([go$readdir,[path2,options2,cb2],err,startTime||Date.now(),Date.now()]);else{if(files&&files.sort)files.sort();if(typeof cb2===\"function\")cb2.call(this,err,files)}}}__name(fs$readdirCallback,\"fs$readdirCallback\")}__name(readdir,\"readdir\");if(process.version.substr(0,4)===\"v0.8\"){var legStreams=legacy(fs2);ReadStream=legStreams.ReadStream;WriteStream=legStreams.WriteStream}var fs$ReadStream=fs2.ReadStream;if(fs$ReadStream){ReadStream.prototype=Object.create(fs$ReadStream.prototype);ReadStream.prototype.open=ReadStream$open}var fs$WriteStream=fs2.WriteStream;if(fs$WriteStream){WriteStream.prototype=Object.create(fs$WriteStream.prototype);WriteStream.prototype.open=WriteStream$open}Object.defineProperty(fs2,\"ReadStream\",{get:function(){return ReadStream},set:function(val){ReadStream=val},enumerable:true,configurable:true});Object.defineProperty(fs2,\"WriteStream\",{get:function(){return WriteStream},set:function(val){WriteStream=val},enumerable:true,configurable:true});var FileReadStream=ReadStream;Object.defineProperty(fs2,\"FileReadStream\",{get:function(){return FileReadStream},set:function(val){FileReadStream=val},enumerable:true,configurable:true});var FileWriteStream=WriteStream;Object.defineProperty(fs2,\"FileWriteStream\",{get:function(){return FileWriteStream},set:function(val){FileWriteStream=val},enumerable:true,configurable:true});function ReadStream(path,options){if(this instanceof ReadStream)return fs$ReadStream.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments)}__name(ReadStream,\"ReadStream\");function ReadStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){if(that.autoClose)that.destroy();that.emit(\"error\",err)}else{that.fd=fd;that.emit(\"open\",fd);that.read()}})}__name(ReadStream$open,\"ReadStream$open\");function WriteStream(path,options){if(this instanceof WriteStream)return fs$WriteStream.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments)}__name(WriteStream,\"WriteStream\");function WriteStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){that.destroy();that.emit(\"error\",err)}else{that.fd=fd;that.emit(\"open\",fd)}})}__name(WriteStream$open,\"WriteStream$open\");function createReadStream(path,options){return new fs2.ReadStream(path,options)}__name(createReadStream,\"createReadStream\");function createWriteStream(path,options){return new fs2.WriteStream(path,options)}__name(createWriteStream,\"createWriteStream\");var fs$open=fs2.open;fs2.open=open;function open(path,flags,mode,cb){if(typeof mode===\"function\")cb=mode,mode=null;return go$open(path,flags,mode,cb);function go$open(path2,flags2,mode2,cb2,startTime){return fs$open(path2,flags2,mode2,function(err,fd){if(err&&(err.code===\"EMFILE\"||err.code===\"ENFILE\"))enqueue([go$open,[path2,flags2,mode2,cb2],err,startTime||Date.now(),Date.now()]);else{if(typeof cb2===\"function\")cb2.apply(this,arguments)}})}__name(go$open,\"go$open\")}__name(open,\"open\");return fs2}__name(patch,\"patch\");function enqueue(elem){debug(\"ENQUEUE\",elem[0].name,elem[1]);fs[gracefulQueue].push(elem);retry()}__name(enqueue,\"enqueue\");var retryTimer;function resetQueue(){var now=Date.now();for(var i=0;i<fs[gracefulQueue].length;++i){if(fs[gracefulQueue][i].length>2){fs[gracefulQueue][i][3]=now;fs[gracefulQueue][i][4]=now}}retry()}__name(resetQueue,\"resetQueue\");function retry(){clearTimeout(retryTimer);retryTimer=void 0;if(fs[gracefulQueue].length===0)return;var elem=fs[gracefulQueue].shift();var fn=elem[0];var args=elem[1];var err=elem[2];var startTime=elem[3];var lastTime=elem[4];if(startTime===void 0){debug(\"RETRY\",fn.name,args);fn.apply(null,args)}else if(Date.now()-startTime>=6e4){debug(\"TIMEOUT\",fn.name,args);var cb=args.pop();if(typeof cb===\"function\")cb.call(null,err)}else{var sinceAttempt=Date.now()-lastTime;var sinceStart=Math.max(lastTime-startTime,1);var desiredDelay=Math.min(sinceStart*1.2,100);if(sinceAttempt>=desiredDelay){debug(\"RETRY\",fn.name,args);fn.apply(null,args.concat([startTime]))}else{fs[gracefulQueue].push(elem)}}if(retryTimer===void 0){retryTimer=setTimeout(retry,0)}}__name(retry,\"retry\");\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["fs","path","options","cb","data","src","dest","flags","go$readdir","mode"],"sources":["/Users/mac/Tommy/Nuxt/node_modules/.pnpm/graceful-fs@4.2.11/node_modules/graceful-fs/graceful-fs.js"],"sourcesContent":["var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          resetQueue()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      resetQueue()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb, startTime) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb, startTime) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb, startTime) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$copyFile = fs.copyFile\n  if (fs$copyFile)\n    fs.copyFile = copyFile\n  function copyFile (src, dest, flags, cb) {\n    if (typeof flags === 'function') {\n      cb = flags\n      flags = 0\n    }\n    return go$copyFile(src, dest, flags, cb)\n\n    function go$copyFile (src, dest, flags, cb, startTime) {\n      return fs$copyFile(src, dest, flags, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$copyFile, [src, dest, flags, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  var noReaddirOptionVersions = /^v[0-5]\\./\n  function readdir (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    var go$readdir = noReaddirOptionVersions.test(process.version)\n      ? function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n      : function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, options, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n\n    return go$readdir(path, options, cb)\n\n    function fs$readdirCallback (path, options, cb, startTime) {\n      return function (err, files) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([\n            go$readdir,\n            [path, options, cb],\n            err,\n            startTime || Date.now(),\n            Date.now()\n          ])\n        else {\n          if (files && files.sort)\n            files.sort()\n\n          if (typeof cb === 'function')\n            cb.call(this, err, files)\n        }\n      }\n    }\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb, startTime) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n  retry()\n}\n\n// keep track of the timeout between retry() calls\nvar retryTimer\n\n// reset the startTime and lastTime to now\n// this resets the start of the 60 second overall timeout as well as the\n// delay between attempts so that we'll retry these jobs sooner\nfunction resetQueue () {\n  var now = Date.now()\n  for (var i = 0; i < fs[gracefulQueue].length; ++i) {\n    // entries that are only a length of 2 are from an older version, don't\n    // bother modifying those since they'll be retried anyway.\n    if (fs[gracefulQueue][i].length > 2) {\n      fs[gracefulQueue][i][3] = now // startTime\n      fs[gracefulQueue][i][4] = now // lastTime\n    }\n  }\n  // call retry to make sure we're actively processing the queue\n  retry()\n}\n\nfunction retry () {\n  // clear the timer and remove it to help prevent unintended concurrency\n  clearTimeout(retryTimer)\n  retryTimer = undefined\n\n  if (fs[gracefulQueue].length === 0)\n    return\n\n  var elem = fs[gracefulQueue].shift()\n  var fn = elem[0]\n  var args = elem[1]\n  // these items may be unset if they were added by an older graceful-fs\n  var err = elem[2]\n  var startTime = elem[3]\n  var lastTime = elem[4]\n\n  // if we don't have a startTime we have no way of knowing if we've waited\n  // long enough, so go ahead and retry this item now\n  if (startTime === undefined) {\n    debug('RETRY', fn.name, args)\n    fn.apply(null, args)\n  } else if (Date.now() - startTime >= 60000) {\n    // it's been more than 60 seconds total, bail now\n    debug('TIMEOUT', fn.name, args)\n    var cb = args.pop()\n    if (typeof cb === 'function')\n      cb.call(null, err)\n  } else {\n    // the amount of time between the last attempt and right now\n    var sinceAttempt = Date.now() - lastTime\n    // the amount of time between when we first tried, and when we last tried\n    // rounded up to at least 1\n    var sinceStart = Math.max(lastTime - startTime, 1)\n    // backoff. wait longer than the total time we've been retrying, but only\n    // up to a maximum of 100ms\n    var desiredDelay = Math.min(sinceStart * 1.2, 100)\n    // it's been long enough since the last retry, do it again\n    if (sinceAttempt >= desiredDelay) {\n      debug('RETRY', fn.name, args)\n      fn.apply(null, args.concat([startTime]))\n    } else {\n      // if we can't do this job yet, push it to the end of the queue\n      // and let the next iteration check again\n      fs[gracefulQueue].push(elem)\n    }\n  }\n\n  // schedule our next run if one isn't already scheduled\n  if (retryTimer === undefined) {\n    retryTimer = setTimeout(retry, 0)\n  }\n}\n"]}}