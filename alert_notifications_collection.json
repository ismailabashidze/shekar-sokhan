{
  "id": "alert_notifications",
  "name": "alert_notifications",
  "type": "base",
  "system": false,
  "schema": [
    {
      "id": "alert_id",
      "name": "alert_id",
      "type": "relation",
      "system": false,
      "required": true,
      "presentable": false,
      "unique": false,
      "options": {
        "collectionId": "system_alerts",
        "cascadeDelete": true,
        "minSelect": null,
        "maxSelect": 1,
        "displayFields": ["title"]
      }
    },
    {
      "id": "recipient_id",
      "name": "recipient_id",
      "type": "relation",
      "system": false,
      "required": true,
      "presentable": false,
      "unique": false,
      "options": {
        "collectionId": "_pb_users_auth_",
        "cascadeDelete": true,
        "minSelect": null,
        "maxSelect": 1,
        "displayFields": ["email", "name"]
      }
    },
    {
      "id": "channel",
      "name": "channel",
      "type": "select",
      "system": false,
      "required": true,
      "presentable": false,
      "unique": false,
      "options": {
        "maxSelect": 1,
        "values": [
          "in_app",
          "email",
          "sms",
          "webhook",
          "push"
        ]
      }
    },
    {
      "id": "status",
      "name": "status",
      "type": "select",
      "system": false,
      "required": true,
      "presentable": false,
      "unique": false,
      "options": {
        "maxSelect": 1,
        "values": [
          "pending",
          "sent",
          "delivered",
          "failed"
        ]
      }
    },
    {
      "id": "escalation_level",
      "name": "escalation_level",
      "type": "number",
      "system": false,
      "required": true,
      "presentable": false,
      "unique": false,
      "options": {
        "min": 1,
        "max": 3,
        "noDecimal": true
      }
    },
    {
      "id": "sent_at",
      "name": "sent_at",
      "type": "date",
      "system": false,
      "required": false,
      "presentable": false,
      "unique": false,
      "options": {
        "min": "",
        "max": ""
      }
    },
    {
      "id": "delivered_at",
      "name": "delivered_at",
      "type": "date",
      "system": false,
      "required": false,
      "presentable": false,
      "unique": false,
      "options": {
        "min": "",
        "max": ""
      }
    },
    {
      "id": "acknowledged_at",
      "name": "acknowledged_at",
      "type": "date",
      "system": false,
      "required": false,
      "presentable": false,
      "unique": false,
      "options": {
        "min": "",
        "max": ""
      }
    },
    {
      "id": "error_message",
      "name": "error_message",
      "type": "text",
      "system": false,
      "required": false,
      "presentable": false,
      "unique": false,
      "options": {
        "min": null,
        "max": null,
        "pattern": ""
      }
    },
    {
      "id": "retry_count",
      "name": "retry_count",
      "type": "number",
      "system": false,
      "required": false,
      "presentable": false,
      "unique": false,
      "options": {
        "min": 0,
        "max": null,
        "noDecimal": true
      }
    }
  ],
  "indexes": [
    "CREATE INDEX `idx_alert_notifications_alert_id` ON `alert_notifications` (`alert_id`)",
    "CREATE INDEX `idx_alert_notifications_recipient_id` ON `alert_notifications` (`recipient_id`)",
    "CREATE INDEX `idx_alert_notifications_status` ON `alert_notifications` (`status`)",
    "CREATE INDEX `idx_alert_notifications_escalation_level` ON `alert_notifications` (`escalation_level`)"
  ],
  "listRule": "@request.auth.role = 'admin'",
  "viewRule": "@request.auth.role = 'admin'",
  "createRule": "@request.auth.role = 'admin'",
  "updateRule": "@request.auth.role = 'admin'",
  "deleteRule": "@request.auth.role = 'admin'",
  "options": {}
}